<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pac-Man Simples</title>
    
    <style>
        :root {
            --map-size: 20; /* Define o tamanho do mapa N x N */
            --cell-size: 30px; /* Tamanho da célula */
            --pac-color: #ff0; /* Amarelo Pac-Man */
            --wall-color: #0000ff; /* Azul da parede */
            --dot-color: #fff; /* Pontos brancos */
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #333;
            margin: 0;
            font-family: sans-serif;
        }

        #game-board {
            display: grid;
            /* O JS definirá o template de colunas, mas aqui definimos as variáveis */
            grid-template-columns: repeat(var(--map-size), var(--cell-size));
            grid-template-rows: repeat(var(--map-size), var(--cell-size));
            border: 5px solid #000;
        }

        .cell {
            width: var(--cell-size);
            height: var(--cell-size);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ---------------- Estilos dos Elementos do Jogo ---------------- */

        .wall {
            background-color: var(--wall-color);
            border: 1px solid var(--wall-color);
        }

        .dot {
            background-color: transparent;
        }

        .dot::after {
            content: '';
            display: block;
            width: 6px;
            height: 6px;
            background-color: var(--dot-color);
            border-radius: 50%;
        }

        .pacman {
            background-color: transparent;
            position: relative;
        }

        .pacman::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: var(--pac-color);
            border-radius: 50%;
            /* BOCA: O clip-path cria o efeito de boca */
            clip-path: polygon(50% 50%, 100% 30%, 100% 70%);
            transition: transform 0.1s ease-in-out;
        }

        /* Classes de direção para rotação */
        .pacman.right::before { transform: rotate(0deg); }
        .pacman.down::before { transform: rotate(90deg); }
        .pacman.left::before { transform: rotate(180deg); }
        .pacman.up::before { transform: rotate(270deg); }

        .empty {
            background-color: #000;
        }

        /* Estilos Fantasma (adicionais para a lógica futura) */
        .ghost {
            background-color: transparent;
        }

        .ghost::after {
            content: '';
            display: block;
            width: 80%;
            height: 80%;
            border-radius: 50% 50% 5px 5px; /* Forma básica do fantasma */
            background-color: red; /* Cor de exemplo */
        }

        #score-board {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--pac-color);
            font-size: 1.5em;
            font-family: var(--font-heading);
        }

    </style>
</head>
<body>
    <div id="score-board">Pontuação: 0</div>
    <div id="game-board"></div>

    <script>
        const MAP_SIZE = 20;
        const TILE_SIZE = 30; // Correspondente ao CSS
        const gameBoard = document.getElementById('game-board');
        const scoreBoard = document.getElementById('score-board');
        let score = 0;

        // 0: Vazio, 1: Parede, 2: Ponto (Dot), 3: Pac-Man (Posição Inicial)
        // Criando um mapa maior (20x20)
        const map = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1],
            [1,2,1,1,1,2,1,1,2,1,1,2,1,1,1,2,1,1,2,1],
            [1,2,1,1,1,2,1,1,2,2,2,2,1,1,1,2,1,1,2,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,2,1,1,1,2,1,2,1,1,1,1,1,2,1,2,1,1,2,1],
            [1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,1],
            [1,1,1,1,1,2,1,1,1,1,1,2,1,2,1,1,1,1,1,1],
            [0,0,0,0,1,2,1,2,2,2,2,2,1,2,1,0,0,0,0,0], // Espaço para Pac-Man (3)
            [1,1,1,1,1,2,1,2,1,1,1,1,1,2,1,1,1,1,1,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1],
            [1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,2,1],
            [1,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];
        
        // Posição inicial do Pac-Man (adaptada ao mapa)
        let pacman = {
            x: 5,
            y: 9,
            direction: 'right'
        };

        // 1. FUNÇÃO DE DESENHO
        function drawMap() {
            gameBoard.innerHTML = ''; // Limpa o tabuleiro
            for (let y = 0; y < map.length; y++) {
                for (let x = 0; x < map[y].length; x++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    
                    const cellValue = map[y][x];

                    if (cellValue === 1) {
                        cell.classList.add('wall');
                    } else if (cellValue === 2) {
                        cell.classList.add('dot');
                    } else if (cellValue === 0) {
                        cell.classList.add('empty');
                    }
                    
                    // Adiciona o Pac-Man na sua posição atual
                    if (y === pacman.y && x === pacman.x) {
                        cell.classList.add('pacman', pacman.direction);
                    }

                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    gameBoard.appendChild(cell);
                }
            }
        }

        // 2. FUNÇÃO DE MOVIMENTO
        function movePacman(dx, dy, newDirection) {
            const newX = pacman.x + dx;
            const newY = pacman.y + dy;

            // Verifica se a nova posição é válida (não é uma parede)
            if (map[newY] && map[newY][newX] !== 1) {
                // Remove a classe 'pacman' da posição antiga (opcional se redesenhar tudo)
                // O drawMap() já faz isso, mas é bom ter a lógica de colisão aqui.

                pacman.x = newX;
                pacman.y = newY;
                pacman.direction = newDirection;

                // Lógica de comer ponto
                if (map[newY][newX] === 2) {
                    map[newY][newX] = 0; // Torna o ponto vazio
                    score += 10;
                    scoreBoard.textContent = `Pontuação: ${score}`;
                }

                drawMap(); // Redesenha o mapa com o Pac-Man na nova posição
            }
        }

        // 3. FUNÇÃO DE CONTROLE
        document.addEventListener('keydown', (e) => {
            switch (e.key) {
                case 'ArrowUp':
                    movePacman(0, -1, 'up');
                    break;
                case 'ArrowDown':
                    movePacman(0, 1, 'down');
                    break;
                case 'ArrowLeft':
                    movePacman(-1, 0, 'left');
                    break;
                case 'ArrowRight':
                    movePacman(1, 0, 'right');
                    break;
            }
        });

        // Inicializa o jogo
        drawMap();
    </script>
</body>
</html>
